(library
  (name conductor)
  (ocamlc_flags :standard -w -55-53)
  (ocamlopt_flags :standard -w -55-53)
  (libraries capnp capnp-rpc-lwt logs lwt))

(rule
  (targets api.mli api.ml)
  (deps api.capnp)
  (action (run capnp compile -I../../../../protocols -o %{bin:capnpc-ocaml} %{deps})))